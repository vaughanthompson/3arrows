/* game board and related css */




div#gameboard
    display: inline-block
    position: relative
    margin: 0px auto
    border: 2px solid blackAlp75
    box-shadow: 0px 0px 30px 5px blackAlp75
    border-radius: rBorderM
    padding: padXXS

div#gameboard div.fluff
    border-style: double
    border-color: whiteAlp25
    border-width: 3px
    border-radius: rBorderStd
    padding: padXXS

div#gameboard div.container
    height: 75vh
    width: 75vh
    display: grid
    grid-auto-flow: row
    grid-gap: 0
    align-items: stretch
    border-right: 1px solid
    border-bottom: 1px solid
    border-color: whiteAlp50

div#gameboard.g6x6 div.container
    grid-template-columns: repeat(6, 1fr)
    grid-template-rows: repeat(6, 1fr)

div#gameboard.g8x8 div.container
    grid-template-columns: repeat(8, 1fr)
    grid-template-rows: repeat(8, 1fr)


div#gameboard div.container > div.item
    position relative
    border: 1px solid
    border-right: none
    border-bottom: none
    border-color: whiteAlp50
    padding: 4px
    z-index: 1000


/* darkMode */
.darkMode
    background: whiteAlp05





/* pieces and piece theming */    
:root {
    --startPosN: 0deg;
    --startPosE: 90deg;
    --startPosS: 180deg;
    --startPosW: 270deg;
    --pTheme1:rgba(220,230,0,1.0);
    --pTheme2:rgba(220,0,0,1.0);
    --pTheme3:rgba(0,100,250,1.0);
    --pTheme4:rgba(0,190,30,1.0);
    --pTheme1atck:rgba(255,255,50,1.0);
    --pTheme2atck:rgba(255,80,80,1.0);
    --pTheme3atck:rgba(0,220,255,1.0);
    --pTheme4atck:rgba(0,255,0,1.0);
    --selected:rgba(255,255,255,1.0);

 

}
svg.piece  {
    position:absolute;
    display: block;
    opacity:1.0;
}
svg.piece g.base rect.fill {
    opacity:0.4;
    //mix-blend-mode: color-dodge;
}
svg.piece g.base rect.border {
    fill: none;
    stroke-miterlimit: 10;
    stroke-width: 2px;
    opacity:1.0;
}
svg.piece g.pieceType {
    transform-origin: inherit;
    /* transition-duration: 750ms; */
}
svg.piece g.pieceType path {
    fill: white;
}
svg.piece g.pieceType polyline {
    stroke:white;
    fill: none;
    stroke-miterlimit: 10;
    stroke-width: 2px
}

div.item.focus {
    z-index: 5000;
}
div.item.focus svg.piece g.base rect.border {
    stroke: white !important;
}




/* default transition time animation */
.movement {
    transition-duration: 750ms;
}

/* piece theming */
.pN rect.fill {fill: var(--pTheme1);}
.pN rect.border {stroke: var(--pTheme1);}
.pE rect.fill {fill: var(--pTheme2);}
.pE rect.border {stroke: var(--pTheme2);}
.pS rect.fill {fill: var(--pTheme3);}
.pS rect.border {stroke: var(--pTheme3);}
.pW rect.fill {fill: var(--pTheme4);}
.pW rect.border {stroke: var(--pTheme4);}




/* piece rotations relative to start position of looking N,E,W,S */
.pN svg.piece g.pieceType.r0 {transform: rotate(calc(var(--startPosN) + 360deg));}
.pN svg.piece g.pieceType.r1 {transform: rotate(calc(var(--startPosN) + 90deg));}
.pN svg.piece g.pieceType.r2 {transform: rotate(calc(var(--startPosN) + 180deg));}
.pN svg.piece g.pieceType.r3 {transform: rotate(calc(var(--startPosN) + 270deg));}

.pE svg.piece g.pieceType.r0 {transform: rotate(calc(var(--startPosE) + 360deg));}
.pE svg.piece g.pieceType.r1 {transform: rotate(calc(var(--startPosE) + 90deg));}
.pE svg.piece g.pieceType.r2 {transform: rotate(calc(var(--startPosE) + 180deg));}
.pE svg.piece g.pieceType.r3 {transform: rotate(calc(var(--startPosE) + 270deg));}

.pS svg.piece g.pieceType.r0 {transform: rotate(calc(var(--startPosS) + 360deg));}
.pS svg.piece g.pieceType.r1 {transform: rotate(calc(var(--startPosS) + 90deg));}
.pS svg.piece g.pieceType.r2 {transform: rotate(calc(var(--startPosS) + 180deg));}
.pS svg.piece g.pieceType.r3 {transform: rotate(calc(var(--startPosS) + 270deg));}

.pW svg.piece g.pieceType.r0 {transform: rotate(calc(var(--startPosW) + 360deg));}
.pW svg.piece g.pieceType.r1 {transform: rotate(calc(var(--startPosW) + 90deg));}
.pW svg.piece g.pieceType.r2 {transform: rotate(calc(var(--startPosW) + 180deg));}
.pW svg.piece g.pieceType.r3 {transform: rotate(calc(var(--startPosW) + 270deg));}


/* available moves anim */
div.item.available {
    border:1px solid whiteAlp50 !important;
    z-index: 2000 !important;
    animation-duration: 800ms;
    animation-timing-function: ease-in;
    animation-iteration-count: 10;
    animation-direction: alternate;
}
div.item.available.pN {
    box-shadow: 0 0 10px 3px var(--pTheme1);
    animation-name: pNavails;
    border:1px solid var(--pTheme1) !important;
}
@keyframes pNavails {
    from {box-shadow: 0 0 5px 3px var(--pTheme1);}
    to {box-shadow: 0 0 15px 5px var(--pTheme1);}
}
div.item.available.pE {
    box-shadow: 0 0 10px 3px var(--pTheme2);
    animation-name: pEavails;
    border:1px solid var(--pTheme2) !important;
}
@keyframes pEavails {
    from {box-shadow: 0 0 5px 3px var(--pTheme2);}
    to {box-shadow: 0 0 15px 5px var(--pTheme2);}
}
div.item.available.pS {
    box-shadow: 0 0 10px 3px var(--pTheme3);
    animation-name: pSavails;
    border:1px solid var(--pTheme3) !important;
}
@keyframes pSavails {
    from {box-shadow: 0 0 5px 3px var(--pTheme3);}
    to {box-shadow: 0 0 15px 5px var(--pTheme3);}
}
div.item.available.pW {
    box-shadow: 0 0 10px 3px var(--pTheme4);
    animation-name: pWavails;
    border:1px solid var(--pTheme4) !important;
}
@keyframes pWavails {
    from {box-shadow: 0 0 5px 3px var(--pTheme4);}
    to {box-shadow: 0 0 15px 5px var(--pTheme4);}
}


/* shield .. hidden */
svg.piece g.shield path.shieldfront1 {
    fill: #111;
}
svg.piece g.shield path.shieldfront2 {
    fill: #333;
}
svg.piece g.shield path.shieldShadow {
    opacity: 0.5;
}
svg.piece g.shield path.shieldBorder {
    stroke-miterlimit: 10;
    stroke-width: 3px
}
.pN svg.piece g.shield path.shieldBorder {
    fill: var(--pTheme1);
    stroke: var(--pTheme1);
}
.pE svg.piece g.shield path.shieldBorder {
    fill: var(--pTheme2);
    stroke: var(--pTheme2);
}
.pS svg.piece g.shield path.shieldBorder {
    fill: var(--pTheme3);
    stroke: var(--pTheme3);
}
.pW svg.piece g.shield path.shieldBorder {
    fill: var(--pTheme4);
    stroke: var(--pTheme4);
}
svg.piece g.hidden g.eye path {
    fill: #fff;
    opacity: 0.9;
}
svg.piece g.hidden g.rings rect {
    fill: none;
    stroke: #fff;
    stroke-miterlimit: 10;
    stroke-width: 3px;
    opacity: 0.1;
}
svg.piece g.hidden g.rings rect:first-child {
    opacity: 0.05;
}
svg.piece g.hidden g.rings rect:last-child {
    opacity: 0.15;
}

div.item.hasHidden svg.piece g.pieceType path {
    fill: whiteAlp10;
}
div.item.hasHidden svg.piece g.pieceType polyline {
    stroke:whiteAlp75;
    fill: none;
    stroke-miterlimit: 10;
    stroke-width: 2px
}





/* selected . attack highlighting */
div.item.attack {
    z-index: 2000 !important;
    animation-duration: 800ms;
    animation-timing-function: ease-in;
    animation-iteration-count: 10;
    animation-direction: alternate;
}
div.item.attack_pN {
    box-shadow: 0 0 10px 3px var(--pTheme1);
    border:1px solid var(--pTheme1atck) !important;
    animation-name: attackable;
}
div.item.attack_pE {
    box-shadow: 0 0 10px 3px var(--pTheme2);
    border:1px solid var(--pTheme2atck) !important;
    animation-name: attackable;
}
div.item.attack_pS {
    box-shadow: 0 0 10px 3px var(--pTheme3);
    border:1px solid var(--pTheme3atck) !important;
    animation-name: attackable;
}
div.item.attack_pW {
    box-shadow: 0 0 10px 3px var(--pTheme4);
    border:1px solid var(--pTheme4atck) !important;
    animation-name: attackable;
}
@keyframes attackable {
    from {box-shadow: 0 0 5px 3px var(--selected);}
    to {box-shadow: 0 0 15px 5px var(--selected);}
}
.pN svg.piece g.pieceType g.attackDir polyline {stroke: var(--pTheme1atck);}
.pN svg.piece g.pieceType g.attackDir path {fill: var(--pTheme1atck);opacity:0.3}
.pE svg.piece g.pieceType g.attackDir polyline {stroke: var(--pTheme2atck);}
.pE svg.piece g.pieceType g.attackDir path {fill: var(--pTheme2atck);opacity:0.3}
.pS svg.piece g.pieceType g.attackDir polyline {stroke: var(--pTheme3atck);}
.pS svg.piece g.pieceType g.attackDir path {fill: var(--pTheme3atck);opacity:0.3}
.pW svg.piece g.pieceType g.attackDir polyline {stroke: var(--pTheme4atck);}
.pW svg.piece g.pieceType g.attackDir path {fill: var(--pTheme4atck);opacity:0.3}




/* general animation setup */
/* scale up, fade to remove */
@keyframes ScaleUpFade {
    0% {
        transform: scale(1.0); opacity:1.0;
    }
    25% {
        transform: scale(0.9); opacity:0.8;
    }
    50% {
        transform: scale(1.2); opacity:0.6;
    }
    100% {
        transform: scale(2.0); opacity:0;
    }
}

/* take off */
@keyframes SwipeOff {
    0% {
        transform: scale(1.0) rotate(0deg) translateY(0);
        opacity:1.0;
    }
    100% {
        transform: scale(1.5) rotate(-360deg) translateY(-20vh);
        opacity:0;
    }
}
/* subtle add */
@keyframes SlideIn {
    0% {
        transform: scale(1.5) translateY(-50px); opacity:0.0;
    }
    60% {
        transform: scale(1.5) translateY(0); opacity:0.5;
    }
    80% {
        transform: scale(0.8) translateY(0); opacity:0.5;
    }
    100% {
        transform: scale(1.0) translateY(0); opacity:1.0;
    }
}



/* execution classes */
.scaleOut {
    animation-fill-mode: forwards;
    animation-duration: 500ms;
    animation-timing-function: ease-in, linear, ease-out;
    animation-iteration-count: 1;
    animation-name: ScaleUpFade;
}
.swipeOff {
    animation-fill-mode: forwards;
    animation-duration: 500ms;
    animation-timing-function: ease-in, linear, ease-out;
    animation-iteration-count: 1;
    animation-name: SwipeOff;
}
.slideDown {
    animation-fill-mode: forwards;
    animation-duration: 500ms;
    animation-timing-function: ease-in, linear, ease-out;
    animation-iteration-count: 1;
    animation-name: SlideIn;
}



/* testing using hover */
.TEST-scaleGo:hover {
    animation-fill-mode: forwards;
    animation-duration: 700ms;
    animation-timing-function: ease-in, linear, ease-out;
    animation-iteration-count: 1;
    animation-name: SwipeOn;
}